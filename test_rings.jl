using DelimitedFiles
using JSON
include("rings.jl")


@time nodlnkd = rings.read_nodlnkd("nodlnkd.txt")

# rs = rings.ring_statistics(4096, nodlnkd, [3920, 206, 1958, 2368, 1206])
# @time results = rings.ring_statistics(100000, nodlnkd, [3, 54451, 33970, 77381, 18112,
#                                                         72628, 41102, 95589, 11290, 50504, 
#                                                         29998, 84542, 14137, 68631, 48192, 
#                                                         91591, 6978, 61429, 25737, 80212, 20931, 
#                                                         64309, 43882, 98415, 2970, 57428, 1],
#                                         14,  Int(1e3))
refnodes = [3, 54451, 33970, 77381, 18112, 72628, 41102, 95589, 11290, 50504, 29998, 84542, 14137, 68631, 48192, 91591, 6978, 61429, 25737, 80212, 20931, 64309, 43882, 98415, 2970, 57428, 36951, 76207, 16933, 71431, 39866, 94380, 9734, 53148, 32678, 87194, 12660, 67106, 46635, 90109, 5784, 60236, 28690, 83178, 23923, 63084, 42639, 97199, 1469, 55952, 35452, 78875, 19608, 74106, 38311, 92870, 21061, 51946, 43989, 86002, 15594, 82586, 49633, 88860, 4162, 58629, 27099, 81554, 22335, 65686, 45229, 99766, 1576, 56049, 35560, 78945, 19678, 72827, 42638, 95812, 11154, 50366, 29859, 84373, 13990, 68491, 48053, 91458, 7156, 61584, 25900, 80391, 33588, 64506, 44037, 98572, 2832, 57295, 36825, 76062, 16829, 71302, 39717, 94272, 9957, 53306, 32871, 87407, 12818, 67259, 46836, 90228, 5642, 60074, 28518, 83038, 23740, 62959, 42555, 97060, 14134, 68615, 48160, 91595, 32252, 86782, 52368, 93038, 9701, 51755, 31253, 85782, 15367, 71242, 49419, 88651, 4341, 58821, 27250, 81748, 22508, 65870, 45416, 99948, 52, 54536, 34023, 77415, 18161, 72681, 41093, 95639, 11310, 50551, 31429, 85927, 15544, 70050, 49567, 93037, 8382, 61475, 25716, 80228, 20968, 64317, 43888, 98422, 2989, 57450, 36986, 76216, 16980, 71481, 39888, 94396, 9797, 53168, 32694, 87234, 12664, 67156, 46714, 90101, 18297, 72783, 41253, 95773, 36423, 75626, 42711, 97205, 1378, 55866, 35399, 78791, 19579, 74021, 38278, 92851, 8530, 51899, 31413, 85943, 15555, 70066, 49582, 88840, 4199, 58673, 27141, 81630, 22352, 65728, 46665, 99802, 222, 54696, 34215, 77591, 18320, 72844, 41277, 95794, 11169, 50419, 29886, 84426, 14038, 68512, 48076, 91505, 7182, 61642, 27307, 81803, 21155, 65897, 45476, 99951, 4237, 58685, 36909, 76073, 16804, 71310, 39734, 94284, 22458, 65827, 45403, 99903, 25337, 79839, 59302, 90239, 5576, 60005, 28457, 82942, 1]                                        
refnodes = [3, 54451, 33970, 77381, 18112,
            72628, 41102, 95589, 11290, 50504, 
            29998, 84542, 14137, 68631, 48192, 
            91591, 6978, 61429, 25737, 80212, 20931, 
            64309, 43882, 98415, 2970, 57428, 1]
@time results = rings.ring_statistics(100000, nodlnkd, refnodes, 16,  Int(1e3))
# @time results = rings.ring_statistics(100000, nodlnkd, [3, 54451, 33970, 77381, 18112, 1],
#                                         12,  Int(1e4))
# @time results = rings.ring_statistics(4096, nodlnkd, [3920, 206, 1958, 2368, 2405, 2866, 1, 10, 50, 100])
# @time results = rings.ring_statistics(4096, nodlnkd, [206, 826, 3304, 1809, 2405, 2866, 1346, 3802, 2542, 1], 14)

rs, ngf, ring_lists = results
# print(ring_lists[4])